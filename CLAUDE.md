# CLAUDE.md

このファイルはClaude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## コミュニケーションスタイル

このプロジェクトでは砕けた日本語の口調でコミュニケーションしてください。堅い敬語は不要です。

## プロジェクト概要

「整体クリック・セラピー」は全年齢向けのElectronベースリラクゼーションクリッカーゲームです。HTML/CSS/JavaScriptで実装され、16種類のCSVファイルでゲームデータを完全に外部化しています。

## 開発セットアップ

### 必要なコマンド

```bash
# 依存関係のインストール
npm install

# ゲーム起動（本番モード）
npm start

# 開発モード起動（DevTools付き）
npm run dev
```

### 開発サーバー

Electronアプリなので、通常のWebサーバーは不要です。`npm start`で直接起動できます。

## プロジェクト構造

```
app/
├── main.js          # Electronメインプロセス
├── preload.js       # セキュアなブリッジ
└── renderer/        # レンダラープロセス
    ├── index.html   # メインHTML
    ├── index.css    # スタイル
    ├── index.js     # ゲームロジック
    ├── assets/      # 画像・音声アセット
    │   ├── img/
    │   ├── audio/
    │   └── ui/
    └── data/csv/    # 16種類のCSVデータファイル
```

## ゲームアーキテクチャ

### 状態管理
- `GameState`クラスで全体的なゲーム状態を管理
- CSV形式でゲームデータを完全外部化
- LocalStorageを使った自動セーブ（5秒間隔）

### 画面構成
1. **タイトル画面** - メニュー選択
2. **会話シーン** - ストーリー進行（タイプライター効果）
3. **メインゲーム** - クリック操作によるリラックスゲージ蓄積
4. **エンディング** - 4種類の分岐エンディング

### CSVデータ仕様
- 全CSVファイルはBOM付きUTF-8、CRLF改行で保存
- ダブルクォートでセル囲い、カンマ区切り
- 画像パス、音声、バランス調整、セリフ等すべて外部化

## 実装済み機能

- [x] 基本UI/UX（4画面）
- [x] CSV読み込みシステム
- [x] クリック操作とリラックスゲージ
- [x] コンボシステム（テンポ判定）
- [x] スキルシステム（3種類）
- [x] エンディング分岐判定
- [x] 設定画面（音量調整）
- [x] 自動セーブ機能

## 今後の拡張予定

- 画像・音声アセットの追加
- アニメーション効果の強化
- 他キャラクター（すず、みちる）の実装
- ギャラリー機能
- 実績システム